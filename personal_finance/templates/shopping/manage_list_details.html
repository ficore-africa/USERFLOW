<!-- List Details Content for Modal -->
<div class="row">
    <div class="col-md-6">
        <h6 class="text-primary">{{ t('shopping_list_information', default='List Information') }}</h6>
        <table class="table table-sm">
            <tr>
                <td><strong>{{ t('shopping_list_name', default='Name') }}:</strong></td>
                <td>{{ selected_list.name }}</td>
            </tr>
            <tr>
                <td><strong>{{ t('shopping_budget', default='Budget') }}:</strong></td>
                <td>{{ "%.2f"|format(selected_list.budget_raw) }}</td>
            </tr>
            <tr>
                <td><strong>{{ t('shopping_total_spent', default='Total Spent') }}:</strong></td>
                <td class="{{ 'text-danger' if selected_list.total_spent_raw > selected_list.budget_raw else 'text-success' }}">
                    {{ "%.2f"|format(selected_list.total_spent_raw) }}
                </td>
            </tr>
            <tr>
                <td><strong>{{ t('shopping_status', default='Status') }}:</strong></td>
                <td>
                    <span class="badge bg-{{ 'success' if selected_list.status == 'completed' else 'primary' }}">
                        {{ t('shopping_status_' + selected_list.status, default=selected_list.status.title()) }}
                    </span>
                </td>
            </tr>
            <tr>
                <td><strong>{{ t('shopping_created_at', default='Created') }}:</strong></td>
                <td>{{ selected_list.created_at.strftime('%Y-%m-%d %H:%M') if selected_list.created_at else 'N/A' }}</td>
            </tr>
        </table>
    </div>
    
    <div class="col-md-6">
        <h6 class="text-primary">{{ t('shopping_progress', default='Progress') }}</h6>
        <div class="mb-3">
            <div class="d-flex justify-content-between">
                <span>{{ t('shopping_items_bought', default='Items Bought') }}</span>
                <span>{{ selected_list.items|selectattr('status', 'equalto', 'bought')|list|length }}/{{ selected_list.items|length }}</span>
            </div>
            <div class="progress">
                <div class="progress-bar" role="progressbar" 
                     style="width: {{ ((selected_list.items|selectattr('status', 'equalto', 'bought')|list|length / selected_list.items|length) * 100) if selected_list.items|length > 0 else 0 }}%">
                </div>
            </div>
        </div>
        
        {% if selected_list.collaborators %}
            <h6 class="text-primary">{{ t('shopping_collaborators', default='Collaborators') }}</h6>
            <div class="mb-3">
                {% for collaborator in selected_list.collaborators %}
                    <span class="badge bg-light text-dark me-1">{{ collaborator }}</span>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>

{% if selected_list.items %}
    <hr>
    <h6 class="text-primary">{{ t('shopping_items', default='Items') }} ({{ selected_list.items|length }})</h6>
    <div class="table-responsive">
        <table class="table table-sm table-hover">
            <thead class="table-light">
                <tr>
                    <th>{{ t('shopping_item_name', default='Item') }}</th>
                    <th>{{ t('shopping_quantity', default='Qty') }}</th>
                    <th>{{ t('shopping_price', default='Price') }}</th>
                    <th>{{ t('shopping_unit', default='Unit') }}</th>
                    <th>{{ t('shopping_category', default='Category') }}</th>
                    <th>{{ t('shopping_store', default='Store') }}</th>
                    <th>{{ t('shopping_status', default='Status') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for item in selected_list.items %}
                    <tr class="{{ 'table-success' if item.status == 'bought' else '' }}">
                        <td><strong>{{ item.name }}</strong></td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ "%.2f"|format(item.price_raw) }}</td>
                        <td>{{ t('shopping_unit_' + item.unit, default=item.unit.title()) }}</td>
                        <td>
                            <span class="badge bg-primary">{{ t('shopping_category_' + item.category, default=item.category.title()) }}</span>
                        </td>
                        <td>{{ item.store }}</td>
                        <td>
                            <span class="badge bg-{{ 'success' if item.status == 'bought' else 'secondary' }}">
                                {{ t('shopping_status_' + item.status, default=item.status.title()) }}
                            </span>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <hr>
    <div class="text-center py-3">
        <i class="fas fa-shopping-cart fa-2x mb-2 text-muted"></i>
        <p class="text-muted">{{ t('shopping_no_items', default='No items in this list yet') }}</p>
    </div>
{% endif %}

<div class="mt-3 text-end">
    <a href="{{ url_for('shopping.edit_list', list_id=selected_list_id) }}" class="btn btn-primary">
        <i class="fas fa-edit me-1"></i>{{ t('shopping_edit_list', default='Edit List') }}
    </a>
</div>